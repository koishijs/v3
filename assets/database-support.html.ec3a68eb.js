import{_ as c,r as n,c as r,b as s,a as o,w as t,F as p,d as l,o as y}from"./app.9e111ae1.js";const i={},d=s("h1",{id:"\u7F16\u5199\u6570\u636E\u5E93\u652F\u6301",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u7F16\u5199\u6570\u636E\u5E93\u652F\u6301","aria-hidden":"true"},"#"),l(" \u7F16\u5199\u6570\u636E\u5E93\u652F\u6301")],-1),_={class:"custom-container tip"},E=s("p",{class:"custom-container-title"},"TIP",-1),f=l("Koishi v3 \u5DF2\u7ECF\u8FDB\u5165 LTS \u9636\u6BB5\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4E0D\u4F1A\u6709\u6700\u65B0\u7684\u529F\u80FD\u4E0E\u652F\u6301\u3002\u5982\u679C\u4F60\u5BF9\u7F16\u5199\u6570\u636E\u5E93\u652F\u6301\u611F\u5174\u8DA3\uFF0C\u63A8\u8350\u5411 "),u={href:"https://koishi.js.org/v4/guide/database/writing.html",target:"_blank",rel:"noopener noreferrer"},h=l("Koishi v4"),D=l(" \u63D0\u4F9B\u6570\u636E\u5E93\u652F\u6301\u3002"),m=s("p",null,"\u6700\u540E\uFF0C\u8BA9\u6211\u4EEC\u4ECB\u7ECD\u4E00\u4E0B\u5982\u4F55\u7F16\u5199\u4E00\u4E2A\u6570\u636E\u5E93\u652F\u6301\u3002\u7531\u4E8E\u6570\u636E\u5E93\u652F\u6301\u5F80\u5F80\u8981\u88AB\u5176\u4ED6\u63D2\u4EF6\u6216\u7528\u6237\u6240\u4F7F\u7528\uFF0C\u6709\u4E00\u4E2A\u597D\u7684\u7C7B\u578B\u6807\u6CE8\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002\u56E0\u6B64\u8FD9\u91CC\u6211\u4EEC\u5C31\u53EA\u63D0\u4F9B TypeScript \u7684\u8303\u4F8B\u4E86\u3002",-1),x=s("p",null,"\u4E0E\u4E0A\u9762\u4ECB\u7ECD\u7684\u65B9\u6CD5\u7C7B\u4F3C\uFF0C\u6211\u4EEC\u4E5F\u91C7\u7528\u6CE8\u5165\u7684\u65B9\u5F0F\uFF0C\u4E0D\u8FC7\u8FD9\u6B21\u6211\u4EEC\u9700\u8981\u5148\u5B9E\u73B0\u4E00\u4E2A\u7C7B\u3002\u6211\u4EEC\u7528 mysql \u6765\u4E3E\u4E2A\u6700\u5C0F\u7684\u652F\u6301\u8303\u4F8B\uFF1A",-1),b=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { createPool, Pool, PoolConfig } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'mysql'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Database } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-core'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u7C7B\u578B\u6CE8\u5165")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"declare"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"module"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-core'"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"namespace"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Database"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Statics"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#88846F"}},"// \u522B\u5FD8\u4E86\u52A0 typeof\uFF0C\u4E0D\u7136\u5C31\u4E0D\u5BF9\u4E86")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#E6DB74"}},"'koishi-plugin-mysql'"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"typeof"),s("span",{style:{color:"#F8F8F2"}}," MysqlDatabase")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u9632\u6B62\u4E0B\u9762\u4EA7\u751F\u7C7B\u578B\u62A5\u9519")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"MysqlDatabase"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"extends"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"Database"),s("span",{style:{color:"#F8F8F2"}}," {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"MysqlDatabase"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," pool"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Pool")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"constructor"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"config"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"PoolConfig"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," {}) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".pool "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"createPool"),s("span",{style:{color:"#F8F8F2"}},"(config)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"query"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"sql"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"values"),s("span",{style:{color:"#F92672"}},"?:"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"any"),s("span",{style:{color:"#F8F8F2"}},")"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Promise"),s("span",{style:{color:"#F8F8F2"}},"<"),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"any"),s("span",{style:{color:"#F8F8F2"}},"> {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"Promise"),s("span",{style:{color:"#F8F8F2"}},"(("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"resolve"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"reject"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".pool."),s("span",{style:{color:"#A6E22E"}},"query"),s("span",{style:{color:"#F8F8F2"}},"(sql, values, ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"error"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"results"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"fields"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F8F8F2"}}," (error) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"reject"),s("span",{style:{color:"#F8F8F2"}},"(error)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        } "),s("span",{style:{color:"#F92672"}},"else"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"resolve"),s("span",{style:{color:"#F8F8F2"}},"(results)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      })")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    })")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// Database.extend \u65B9\u6CD5\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4F20\u5165\u4E00\u4E2A\u6570\u636E\u5E93\u7C7B")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"Database."),s("span",{style:{color:"#A6E22E"}},"extend"),s("span",{style:{color:"#F8F8F2"}},"(MysqlDatabase, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u63D0\u4F9B\u5185\u7F6E\u65B9\u6CD5\u7684\u5B9E\u73B0\uFF08\u53C2\u89C1\u201C\u4F7F\u7528\u6570\u636E\u5E93\u201D\u4E00\u8282\u4E2D\u7684\u201C\u6269\u5C55\u6570\u636E\u5E93\u65B9\u6CD5\u201D\uFF09")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"default"),s("span",{style:{color:"#F8F8F2"}}," MysqlDatabase")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," name "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'mysql'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"function"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"apply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"config"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"PoolConfig"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," {}) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," db "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"MysqlDatabase"),s("span",{style:{color:"#F8F8F2"}},"(ctx.app, config)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ctx.database "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," db")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"})])],-1),g=l("\u5F53\u7136\uFF0C\u771F\u6B63\u7684 "),A=l("koishi-plugin-mysql"),k=l(" \u8981\u6BD4\u4E0A\u9762\u7684\u4F8B\u5B50\u590D\u6742\u5F97\u591A\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u5904\u7406\u6709\u5173\u6570\u636E\u5E93\u7684\u66F4\u591A\u7EC6\u8282\uFF1A"),q=s("ul",null,[s("li",null,"\u6570\u636E\u5E93\u7684\u751F\u547D\u5468\u671F"),s("li",null,"\u66F4\u591A\u7684 ORM \u7C7B\u578B"),s("li",null,"\u66F4\u591A\u7684\u6807\u51C6\u65B9\u6CD5"),s("li",null,"\u4E0E ORM API \u4E4B\u95F4\u7684\u5BF9\u63A5")],-1),v=s("p",null,"\u7B49\u7B49\u3002",-1),P=l("\u4F60\u53EF\u4EE5\u5728 "),B={href:"https://github.com/koishijs/koishi/tree/master/packages/plugin-mysql",target:"_blank",rel:"noopener noreferrer"},M=l("\u8FD9\u91CC"),w=l(" \u770B\u5230\u5B8C\u6574\u7684\u6E90\u4EE3\u7801\u3002");function C(j,L){const e=n("OutboundLink"),a=n("panel-view"),F=n("RouterLink");return y(),r(p,null,[d,s("div",_,[E,s("p",null,[f,s("a",u,[h,o(e)]),D])]),m,x,o(a,{class:"code",title:"",style:{}},{default:t(()=>[b]),_:1}),s("p",null,[g,o(F,{to:"/api/database/mysql.html"},{default:t(()=>[A]),_:1}),k]),q,v,s("p",null,[P,s("a",B,[M,o(e)]),w])],64)}var R=c(i,[["render",C]]);export{R as default};
