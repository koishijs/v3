import{_ as l,r as i,c as r,b as e,a as t,w as o,F as c,e as n,d as s,o as p}from"./app.9e111ae1.js";const h={},u=n('<h1 id="\u6D4B\u8BD5\u5DE5\u5177-test-utils" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5\u5DE5\u5177-test-utils" aria-hidden="true">#</a> \u6D4B\u8BD5\u5DE5\u5177 (Test Utils)</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u672C\u9875\u663E\u793A\u7684\u7248\u672C\u53F7\u90FD\u8868\u793A\u5BF9\u5E94\u7684 koishi-test-utils \u7248\u672C\u53F7\uFF08\u800C\u4E0D\u662F\u5BF9\u5E94\u7684 koishi \u7248\u672C\u53F7\uFF09\u3002</p></div><p>koishi-test-utils \u5305\u542B\u4E86\u88AB Koishi \u4F7F\u7528\u7684\u6D4B\u8BD5\u5DE5\u5177\u3002</p><h2 id="testdatabase-app-app" tabindex="-1"><a class="header-anchor" href="#testdatabase-app-app" aria-hidden="true">#</a> testDatabase(app: App)</h2>',4),_=e("strong",null,"app:",-1),b=s(),m=e("code",null,"App",-1),g=s(" \u7528\u4E8E\u6D4B\u8BD5\u7684 App \u5B9E\u4F8B"),f=s("\u8FD4\u56DE\u503C: "),y=e("code",null,"App",-1),F=s(" \u7528\u4E8E\u6D4B\u8BD5\u7684 App \u5B9E\u4F8B"),x=e("p",null,"\u6D4B\u8BD5\u5168\u90E8\u5185\u7F6E\u6570\u636E\u5E93\u65B9\u6CD5\u3002",-1),k=e("h2",{id:"\u7C7B-mockedapp",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7C7B-mockedapp","aria-hidden":"true"},"#"),s(" \u7C7B\uFF1AMockedApp")],-1),v=e("p",null,"App \u7684\u5B50\u7C7B\uFF0C\u5C01\u88C5\u4E86\u4E00\u7CFB\u5217\u7528\u4E8E\u6D4B\u8BD5\u7684\u65B9\u6CD5\u3002\u9664\u4E86 MockedApp \u8FD9\u4E2A\u540D\u5B57\u5916\uFF0C\u4F60\u8FD8\u53EF\u4EE5\u76F4\u63A5\u4ECE koishi-test-utils \u4E2D\u5F15\u5165 App\uFF1A",-1),A=e("pre",{class:"shiki",style:{"background-color":"#272822"}},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F92672"}},"import"),e("span",{style:{color:"#F8F8F2"}}," { App } "),e("span",{style:{color:"#F92672"}},"from"),e("span",{style:{color:"#F8F8F2"}}," "),e("span",{style:{color:"#E6DB74"}},"'koishi-test-utils'")]),s(`
`),e("span",{class:"line"}),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),e("span",{style:{color:"#F8F8F2"}}," mockedApp "),e("span",{style:{color:"#F92672"}},"="),e("span",{style:{color:"#F8F8F2"}}," "),e("span",{style:{color:"#F92672"}},"new"),e("span",{style:{color:"#F8F8F2"}}," "),e("span",{style:{color:"#A6E22E"}},"App"),e("span",{style:{color:"#F8F8F2"}},"()")]),s(`
`),e("span",{class:"line"})])],-1),B=n('<h3 id="new-mockedapp-options" tabindex="-1"><a class="header-anchor" href="#new-mockedapp-options" aria-hidden="true">#</a> new MockedApp(options?)</h3><ul><li><strong>options.mockStart:</strong> <code>boolean</code> \u4F7F\u6784\u9020\u7684\u5E94\u7528\u5904\u4E8E\u5DF2\u8FDE\u63A5\u72B6\u6001</li><li><strong>options.mockDatabase:</strong> <code>boolean</code> \u7ED9\u6784\u9020\u7684\u5E94\u7528\u914D\u7F6E\u4E00\u4E2A <a href="#%E7%B1%BB-memorydatabase">MemoryDatabase</a></li><li>\u8FD4\u56DE\u503C: <code>MockedApp</code></li></ul><p>\u8FD9\u91CC\u7684 <code>options</code> \u9664\u4E86\u652F\u6301 App \u7C7B\u7684\u6240\u6709\u6784\u9020\u9009\u9879\u5916\uFF0C\u8FD8\u652F\u6301\u4E0B\u5217\u9009\u9879\uFF1A</p><h3 id="app-receive-meta" tabindex="-1"><a class="header-anchor" href="#app-receive-meta" aria-hidden="true">#</a> app.receive(meta)</h3><ul><li><strong>meta:</strong> <code>Partial&lt;Session&gt;</code> \u4E8B\u4EF6\u6240\u9700\u7684 Session \u5C5E\u6027</li><li>\u8FD4\u56DE\u503C: <code>string</code></li></ul><p>\u89E6\u53D1\u4F1A\u8BDD\u4E8B\u4EF6\u3002</p><h3 id="app-session-userid-channelid" tabindex="-1"><a class="header-anchor" href="#app-session-userid-channelid" aria-hidden="true">#</a> app.session(userId, channelId?)</h3><ul><li><strong>userId:</strong> <code>string</code> \u7528\u6237 ID</li><li><strong>channelId:</strong> <code>string</code> \u9891\u9053 ID</li><li>\u8FD4\u56DE\u503C: <code>TestSession</code></li></ul><p>\u521B\u5EFA\u4E00\u4E2A\u6D4B\u8BD5\u4F1A\u8BDD\u3002</p><h2 id="\u7C7B-testsession" tabindex="-1"><a class="header-anchor" href="#\u7C7B-testsession" aria-hidden="true">#</a> \u7C7B\uFF1ATestSession</h2><p><strong>\u6D4B\u8BD5\u4F1A\u8BDD</strong>\u662F\u5BF9\u53D1\u5F80\u540C\u4E00\u4E0A\u4E0B\u6587\u7684\u591A\u6B21\u6D88\u606F\u7684\u4E00\u4E2A\u62BD\u8C61\u3002\u5B83\u4F7F\u7528 <code>app.session()</code> \u65B9\u6CD5\u521B\u5EFA\uFF0C\u5E76\u501F\u52A9 <code>app.receive()</code> \u5B9E\u73B0\u5176\u529F\u80FD\u3002</p>',11),w={class:"custom-container warning"},E=e("p",{class:"custom-container-title"},"WARNING",-1),I=s("\u8FD9\u4E2A\u7C7B\u4E0B\u7684\u5927\u90E8\u5206\u65B9\u6CD5\u7684\u8FD4\u56DE\u90FD\u57FA\u4E8E "),D=s("session.send"),N=s(" \u65B9\u6CD5\u548C "),R=s("after-middleware"),M=s(" \u4E8B\u4EF6\u3002\u5728\u63D0\u4F9B\u4E86\u6781\u5927\u65B9\u4FBF\u7684\u540C\u65F6\uFF0C\u4F1A\u8BDD\u4E5F\u5B58\u5728\u4E00\u4E9B\u9650\u5236\u3002\u5982\u679C\u4F60\u7684\u63D2\u4EF6\u5B58\u5728\u4EE5\u4E0B\u51E0\u79CD\u7279\u6B8A\u60C5\u51B5\u4E4B\u4E00\uFF1A"),P=e("ul",null,[e("li",null,"\u4F7F\u7528\u4E86\u5F02\u6B65\u7684 message \u4E8B\u4EF6\u76D1\u542C\u5668"),e("li",null,"\u4E2D\u95F4\u4EF6\u548C\u6307\u4EE4\u4E2D\u53EF\u80FD\u5B58\u5728\u672A\u963B\u585E\u7684\u5F02\u6B65\u64CD\u4F5C"),e("li",null,"\u76F4\u63A5\u8C03\u7528 Bot API \u800C\u975E meta.send")],-1),S=e("p",null,"\u8FD9\u4E2A\u7C7B\u7684\u65B9\u6CD5\u53EF\u80FD\u4F1A\u8FD4\u56DE\u9884\u6599\u4E4B\u5916\u7684\u7ED3\u679C\u3002\u5F53\u7136\uFF0C\u5982\u679C\u8981\u6D4B\u8BD5\u8FD9\u4E9B\u7279\u6B8A\u60C5\u51B5\uFF0Ckoishi-test-utils \u4E5F\u662F\u63D0\u4F9B\u4E86\u5176\u4ED6\u65B9\u6CD5\u7684\u3002",-1),$=n('<h3 id="session-receive-content-count" tabindex="-1"><a class="header-anchor" href="#session-receive-content-count" aria-hidden="true">#</a> session.receive(content, count?)</h3><ul><li><strong>content:</strong> <code>string</code> \u8981\u53D1\u9001\u7684\u4FE1\u606F</li><li><strong>count:</strong> <code>number</code> \u7B49\u5F85\u7684\u56DE\u590D\u6570\u91CF</li><li>\u8FD4\u56DE\u503C: <code>Promise&lt;string[]&gt;</code> \u6536\u5230\u7684\u56DE\u590D\u5217\u8868</li></ul><p>\u6A21\u62DF\u53D1\u9001\u4E00\u6761\u6D88\u606F\u3002</p><h3 id="session-shouldreply-content-reply" tabindex="-1"><a class="header-anchor" href="#session-shouldreply-content-reply" aria-hidden="true">#</a> session.shouldReply(content, reply?)</h3><ul><li><strong>content:</strong> <code>string</code> \u8981\u53D1\u9001\u7ED9\u673A\u5668\u4EBA\u7684\u4FE1\u606F</li><li><strong>reply:</strong> <code>string | RegExp | readonly (string | RegExp)[]</code> \u5E94\u6709\u7684\u56DE\u590D\uFF0C\u5982\u679C\u7565\u53BB\u5219\u4E0D\u4F1A\u8FDB\u884C\u6BD4\u8F83</li><li>\u8FD4\u56DE\u503C: <code>Promise&lt;void&gt;</code></li></ul><p>\u65AD\u8A00\u67D0\u6761\u4FE1\u606F\u5E94\u5B58\u5728\u67D0\u4E9B\u56DE\u590D\u3002</p><h3 id="session-shouldnotreply-content" tabindex="-1"><a class="header-anchor" href="#session-shouldnotreply-content" aria-hidden="true">#</a> session.shouldNotReply(content)</h3><ul><li><strong>content:</strong> <code>string</code> \u8981\u53D1\u9001\u7ED9\u673A\u5668\u4EBA\u7684\u4FE1\u606F</li><li>\u8FD4\u56DE\u503C: <code>Promise&lt;void&gt;</code></li></ul><p>\u65AD\u8A00\u67D0\u6761\u4FE1\u606F\u4E0D\u5E94\u5B58\u5728\u4EFB\u4F55\u56DE\u590D\u3002</p><h2 id="\u7C7B-memorydatabase" tabindex="-1"><a class="header-anchor" href="#\u7C7B-memorydatabase" aria-hidden="true">#</a> \u7C7B\uFF1AMemoryDatabase</h2><h3 id="db-store" tabindex="-1"><a class="header-anchor" href="#db-store" aria-hidden="true">#</a> db.$store</h3><h3 id="db-create" tabindex="-1"><a class="header-anchor" href="#db-create" aria-hidden="true">#</a> db.$create</h3><h3 id="db-select" tabindex="-1"><a class="header-anchor" href="#db-select" aria-hidden="true">#</a> db.$select</h3><h3 id="db-update" tabindex="-1"><a class="header-anchor" href="#db-update" aria-hidden="true">#</a> db.$update</h3><h3 id="db-remove" tabindex="-1"><a class="header-anchor" href="#db-remove" aria-hidden="true">#</a> db.$remove</h3><h3 id="db-count" tabindex="-1"><a class="header-anchor" href="#db-count" aria-hidden="true">#</a> db.$count</h3>',16);function T(V,C){const a=i("RouterLink"),d=i("panel-view");return p(),r(c,null,[u,e("ul",null,[e("li",null,[_,b,t(a,{to:"/api/app.html"},{default:o(()=>[m]),_:1}),g]),e("li",null,[f,t(a,{to:"/api/app.html"},{default:o(()=>[y]),_:1}),F])]),x,k,v,t(d,{class:"code",title:"",style:{}},{default:o(()=>[A]),_:1}),B,e("div",w,[E,e("p",null,[I,t(a,{to:"/api/session.html#session-send"},{default:o(()=>[D]),_:1}),N,t(a,{to:"/api/events.html#%E4%BA%8B%E4%BB%B6%EF%BC%9Aafter-middleware"},{default:o(()=>[R]),_:1}),M]),P,S]),$],64)}var U=l(h,[["render",T]]);export{U as default};
