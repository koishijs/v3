<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/koishi.png"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#5546a3"><title>上下文 (Context) | Koishi</title><meta name="description" content="">
    <link rel="modulepreload" href="/v3/assets/app.9e111ae1.js"><link rel="modulepreload" href="/v3/assets/context.html.fa38265c.js"><link rel="modulepreload" href="/v3/assets/context.html.d741630a.js">
    <link rel="stylesheet" href="/v3/assets/style.50b5c507.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/v3/" class=""><!----><span class="site-name can-hide">Koishi</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/v3/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/guide/starter.html" class="nav-link" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/api/" class="nav-link router-link-active" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/plugins/" class="nav-link" aria-label="官方插件"><!--[--><!--]--> 官方插件 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/koishijs/koishi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/v3/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/guide/starter.html" class="nav-link" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/api/" class="nav-link router-link-active" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/plugins/" class="nav-link" aria-label="官方插件"><!--[--><!--]--> 官方插件 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/koishijs/koishi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/v3/api/" class="nav-link router-link-active sidebar-heading sidebar-item" aria-label="总览"><!--[--><!--]--> 总览 <!--[--><!--]--></a><!----><!--]--><!--[--><p class="sidebar-heading sidebar-item active">核心 API</p><ul class=""><li><!--[--><a aria-current="page" href="/v3/api/context.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="上下文 (Context)"><!--[--><!--]--> 上下文 (Context) <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#实例属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实例属性"><!--[--><!--]--> 实例属性 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-database" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.database"><!--[--><!--]--> ctx.database <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-router" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.router"><!--[--><!--]--> ctx.router <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-bots" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.bots"><!--[--><!--]--> ctx.bots <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#过滤器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="过滤器"><!--[--><!--]--> 过滤器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-all" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.all()"><!--[--><!--]--> ctx.all() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-self-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.self()"><!--[--><!--]--> ctx.self() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-user-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.user()"><!--[--><!--]--> ctx.user() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-group-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.group()"><!--[--><!--]--> ctx.group() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-channel-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.channel()"><!--[--><!--]--> ctx.channel() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-platform-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.platform()"><!--[--><!--]--> ctx.platform() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-type-except-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.{type}.except()"><!--[--><!--]--> ctx.{type}.except() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-select-key-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.select()"><!--[--><!--]--> ctx.select() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-unselect-key-values" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.unselect()"><!--[--><!--]--> ctx.unselect() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-union-filter" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.union()"><!--[--><!--]--> ctx.union() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-intersect-filter" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.intersect()"><!--[--><!--]--> ctx.intersect() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-except-filter" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.except()"><!--[--><!--]--> ctx.except() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-match-session" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.match()"><!--[--><!--]--> ctx.match() <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#钩子与中间件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="钩子与中间件"><!--[--><!--]--> 钩子与中间件 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-emit-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.emit()"><!--[--><!--]--> ctx.emit() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-parallel-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.parallel()"><!--[--><!--]--> ctx.parallel() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-bail-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.bail()"><!--[--><!--]--> ctx.bail() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-serial-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.serial()"><!--[--><!--]--> ctx.serial() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-chain-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.chain()"><!--[--><!--]--> ctx.chain() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-waterfall-session-event-param" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.waterfall()"><!--[--><!--]--> ctx.waterfall() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-on-event-listener-prepend" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.on()"><!--[--><!--]--> ctx.on() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-once-event-listener-prepend" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.once()"><!--[--><!--]--> ctx.once() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-before-event-listener-append" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.before()"><!--[--><!--]--> ctx.before() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-middleware-middleware-prepend" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.middleware()"><!--[--><!--]--> ctx.middleware() <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#指令与插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="指令与插件"><!--[--><!--]--> 指令与插件 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-plugin-plugin-options" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.plugin()"><!--[--><!--]--> ctx.plugin() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-with-deps-plugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.with()"><!--[--><!--]--> ctx.with() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-command-def-desc-config" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.command()"><!--[--><!--]--> ctx.command() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-getselfids-type-assignees" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.getSelfIds()"><!--[--><!--]--> ctx.getSelfIds() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-broadcast-channels-content-forced" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.broadcast()"><!--[--><!--]--> ctx.broadcast() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-logger-scope" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.logger()"><!--[--><!--]--> ctx.logger() <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#ctx-dispose-plugin" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ctx.dispose()"><!--[--><!--]--> ctx.dispose() <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#静态属性和方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="静态属性和方法"><!--[--><!--]--> 静态属性和方法 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/api/context.html#context-current" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Context.current"><!--[--><!--]--> Context.current <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/api/context.html#context-delegate-name" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Context.delegate()"><!--[--><!--]--> Context.delegate() <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/v3/api/app.html" class="nav-link sidebar-item" aria-label="应用 (App)"><!--[--><!--]--> 应用 (App) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/bot.html" class="nav-link sidebar-item" aria-label="机器人 (Bot)"><!--[--><!--]--> 机器人 (Bot) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/events.html" class="nav-link sidebar-item" aria-label="事件 (Events)"><!--[--><!--]--> 事件 (Events) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/session.html" class="nav-link sidebar-item" aria-label="会话 (Session)"><!--[--><!--]--> 会话 (Session) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/command.html" class="nav-link sidebar-item" aria-label="指令 (Command)"><!--[--><!--]--> 指令 (Command) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/segment.html" class="nav-link sidebar-item" aria-label="消息段 (Segment)"><!--[--><!--]--> 消息段 (Segment) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/database.html" class="nav-link sidebar-item" aria-label="数据库 (Database)"><!--[--><!--]--> 数据库 (Database) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/adapter.html" class="nav-link sidebar-item" aria-label="适配器 (Adapter)"><!--[--><!--]--> 适配器 (Adapter) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/global.html" class="nav-link sidebar-item" aria-label="其他内置 API"><!--[--><!--]--> 其他内置 API <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">其他官方包</p><ul class=""><li><!--[--><a href="/v3/api/utils.html" class="nav-link sidebar-item" aria-label="常用工具 (Utils)"><!--[--><!--]--> 常用工具 (Utils) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/test-utils.html" class="nav-link sidebar-item" aria-label="测试工具 (Test Utils)"><!--[--><!--]--> 测试工具 (Test Utils) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/adapter/onebot.html" class="nav-link sidebar-item" aria-label="平台：OneBot"><!--[--><!--]--> 平台：OneBot <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/adapter/telegram.html" class="nav-link sidebar-item" aria-label="平台：Telegram"><!--[--><!--]--> 平台：Telegram <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/adapter/discord.html" class="nav-link sidebar-item" aria-label="平台：Discord"><!--[--><!--]--> 平台：Discord <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/adapter/kaiheila.html" class="nav-link sidebar-item" aria-label="平台：Kaiheila"><!--[--><!--]--> 平台：Kaiheila <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/database/mongo.html" class="nav-link sidebar-item" aria-label="数据库：Mongo"><!--[--><!--]--> 数据库：Mongo <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/database/mysql.html" class="nav-link sidebar-item" aria-label="数据库：MySQL"><!--[--><!--]--> 数据库：MySQL <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">更新与迁移</p><ul class=""><li><!--[--><a href="/v3/api/changelog.html" class="nav-link sidebar-item" aria-label="v3 更新日志"><!--[--><!--]--> v3 更新日志 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/api/migration.html" class="nav-link sidebar-item" aria-label="从旧版本迁移"><!--[--><!--]--> 从旧版本迁移 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="上下文-context" tabindex="-1"><a class="header-anchor" href="#上下文-context" aria-hidden="true">#</a> 上下文 (Context)</h1><p><strong>上下文 (Context)</strong> 是 Koishi 的重要概念。你的每一个插件，中间件，监听器和指令都被绑定在上下文上。</p><h2 id="实例属性" tabindex="-1"><a class="header-anchor" href="#实例属性" aria-hidden="true">#</a> 实例属性</h2><p>下面的属性为了访问方便而绑定，严格上它们对一个 App 实例下的所有上下文都是相同的。</p><h3 id="ctx-database" tabindex="-1"><a class="header-anchor" href="#ctx-database" aria-hidden="true">#</a> ctx.database</h3><ul><li>类型: <code>Database</code></li></ul><p>当前应用的 <a href="/v3/api/database.html#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1" class="">Database</a> 对象。</p><h3 id="ctx-router" tabindex="-1"><a class="header-anchor" href="#ctx-router" aria-hidden="true">#</a> ctx.router</h3><ul><li>类型: <code>KoaRouter</code></li></ul><p>如果你配置了 <a href="/v3/api/app.html#option-port" class="">port</a> 选项，则这个属性将作为一个 <a href="https://github.com/koajs/router/blob/master/API.md" target="_blank" rel="noopener noreferrer">KoaRouter<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 实例。你可以在上面自定义新的路由：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">ctx.router.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;/path&#39;</span><span style="color:#F8F8F2;">, (</span><span style="color:#FD971F;font-style:italic;">ctx</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// handle request</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><h3 id="ctx-bots" tabindex="-1"><a class="header-anchor" href="#ctx-bots" aria-hidden="true">#</a> ctx.bots</h3><ul><li>类型: <code>Bot[] &amp; Record&lt;string, Bot&gt;</code></li></ul><p>一个键值对，保存了当前应用下的所有 Bot 实例。</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>在使用多机器人时，Koishi 不能保证 <code>ctx.bots[0]</code> 的行为一致。因此，如果想要通过这个接口访问单个机器人的 API，请使用以下的形式访问：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">ctx.bots[</span><span style="color:#E6DB74;">`</span><span style="color:#F92672;">${</span><span style="color:#F8F8F2;">platform</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">:</span><span style="color:#F92672;">${</span><span style="color:#F8F8F2;">selfId</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#88846F;">// platform 为对应机器人的所在平台，而 selfId 为对应机器人的 ID</span></span>
<span class="line"><span style="color:#88846F;">// 一般而言，platform 可以从 session.platform，而 selfId 可以从 session.selfId 获得</span></span>
<span class="line"><span style="color:#88846F;">// 不过也有需要从别的地方获取这两个值的情况</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div></div><h2 id="过滤器" tabindex="-1"><a class="header-anchor" href="#过滤器" aria-hidden="true">#</a> 过滤器</h2><p>有关这里的 API，请参见 <a href="/v3/guide/context.html#%E4%BD%BF%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87" class="">使用上下文</a>。</p><h3 id="ctx-all" tabindex="-1"><a class="header-anchor" href="#ctx-all" aria-hidden="true">#</a> ctx.all()</h3><ul><li>返回值: <code>Context</code> 新的上下文</li></ul><p>选取上下文全集。</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>这个方法与 <code>ctx.app</code> 的区别在于，后者不受插件管理器控制，容易产生内存泄漏。因此我们建议，除非你已经为你的插件声明了副作用，你应当尽量使用这个方法。参见 <a href="/v3/guide/context.html#%E6%8F%92%E4%BB%B6%E7%83%AD%E9%87%8D%E8%BD%BD" class="">插件热重载</a>。</p></div><h3 id="ctx-self-values" tabindex="-1"><a class="header-anchor" href="#ctx-self-values" aria-hidden="true">#</a> ctx.self(...values)</h3><h3 id="ctx-user-values" tabindex="-1"><a class="header-anchor" href="#ctx-user-values" aria-hidden="true">#</a> ctx.user(...values)</h3><h3 id="ctx-group-values" tabindex="-1"><a class="header-anchor" href="#ctx-group-values" aria-hidden="true">#</a> ctx.group(...values)</h3><h3 id="ctx-channel-values" tabindex="-1"><a class="header-anchor" href="#ctx-channel-values" aria-hidden="true">#</a> ctx.channel(...values)</h3><h3 id="ctx-platform-values" tabindex="-1"><a class="header-anchor" href="#ctx-platform-values" aria-hidden="true">#</a> ctx.platform(...values)</h3><ul><li><strong>values:</strong> <code>string[]</code> 允许的机器人 / 用户 / 群组 / 频道 / 平台名称构成的数组</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>选取当前上下文的子集，限定机器人 / 用户 / 群组 / 频道 / 平台名称为所给定的值。</p><h3 id="ctx-type-except-values" tabindex="-1"><a class="header-anchor" href="#ctx-type-except-values" aria-hidden="true">#</a> ctx.{type}.except(...values)</h3><ul><li><strong>values:</strong> <code>string[]</code> 禁止的机器人 / 用户 / 群组 / 频道 / 平台名称构成的数组</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>选取当前上下文的子集，排除机器人 / 用户 / 群组 / 频道 / 平台名称为所给定的值。这里的 type 同上文。</p><h3 id="ctx-select-key-values" tabindex="-1"><a class="header-anchor" href="#ctx-select-key-values" aria-hidden="true">#</a> ctx.select(key, ...values)</h3><ul><li><strong>values:</strong> <code>string[]</code> 如果非空则表示允许的 key 属性可选值；否则只需 key 属性为 truthy 即可</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>选取当前上下文的子集，限定会话对象的 key 属性所对应的值。</p><h3 id="ctx-unselect-key-values" tabindex="-1"><a class="header-anchor" href="#ctx-unselect-key-values" aria-hidden="true">#</a> ctx.unselect(key, ...values)</h3><ul><li><strong>values:</strong> <code>string[]</code> 如果非空则表示允许的 key 属性禁用值；否则只需 key 属性为 falsy 即可</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>选取当前上下文的子集，排除会话对象的 key 属性所对应的值。</p><h3 id="ctx-union-filter" tabindex="-1"><a class="header-anchor" href="#ctx-union-filter" aria-hidden="true">#</a> ctx.union(filter)</h3><ul><li><strong>context:</strong> <code>Context | ((session: Session) =&gt; boolean)</code> 另一个上下文或者过滤器函数</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>给出当前上下文和其他上下文的并集。</p><h3 id="ctx-intersect-filter" tabindex="-1"><a class="header-anchor" href="#ctx-intersect-filter" aria-hidden="true">#</a> ctx.intersect(filter)</h3><ul><li><strong>context:</strong> <code>Context | ((session: Session) =&gt; boolean)</code> 另一个上下文或者过滤器函数</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>给出当前上下文和其他上下文的交集。</p><h3 id="ctx-except-filter" tabindex="-1"><a class="header-anchor" href="#ctx-except-filter" aria-hidden="true">#</a> ctx.except(filter)</h3><ul><li><strong>context:</strong> <code>Context | ((session: Session) =&gt; boolean)</code> 另一个上下文或者过滤器函数</li><li>返回值: <code>Context</code> 新的上下文</li></ul><p>给出当前上下文和其他上下文的差集。</p><h3 id="ctx-match-session" tabindex="-1"><a class="header-anchor" href="#ctx-match-session" aria-hidden="true">#</a> ctx.match(session)</h3><ul><li><strong>session:</strong> <a href="/v3/api/session.html" class=""><code>Session</code></a> 会话对象</li><li>返回值: <code>boolean</code> 匹配结果</li></ul><p>测试上下文能否匹配会话对象。</p><h2 id="钩子与中间件" tabindex="-1"><a class="header-anchor" href="#钩子与中间件" aria-hidden="true">#</a> 钩子与中间件</h2><p>有关这里的 API，请参见 <a href="/v3/guide/lifecycle.html#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F" class="">事件系统</a>。</p><h3 id="ctx-emit-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-emit-session-event-param" aria-hidden="true">#</a> ctx.emit(session?, event, ...param)</h3><h3 id="ctx-parallel-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-parallel-session-event-param" aria-hidden="true">#</a> ctx.parallel(session?, event, ...param)</h3><ul><li><strong>session:</strong> <a href="/v3/api/session.html" class=""><code>Session</code></a> 会话对象</li><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>param:</strong> <code>any[]</code> 事件的参数</li><li>返回值: <code>boolean</code> 匹配结果</li></ul><p>同时触发所有 event 事件的能够匹配 session 对象的回调函数。emit 为同步，parallel 为异步。</p><h3 id="ctx-bail-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-bail-session-event-param" aria-hidden="true">#</a> ctx.bail(session?, event, ...param)</h3><h3 id="ctx-serial-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-serial-session-event-param" aria-hidden="true">#</a> ctx.serial(session?, event, ...param)</h3><ul><li><strong>session:</strong> <a href="/v3/api/session.html" class=""><code>Session</code></a> 会话对象</li><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>param:</strong> <code>any[]</code> 事件的参数</li><li>返回值: <code>boolean</code> 匹配结果</li></ul><p>依次触发所有 event 事件的能够匹配 session 对象的回调函数。当返回一个 false, null, undefined 以外的值时将这个值作为结果返回。bail 为同步，serial 为异步。</p><h3 id="ctx-chain-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-chain-session-event-param" aria-hidden="true">#</a> ctx.chain(session?, event, ...param)</h3><h3 id="ctx-waterfall-session-event-param" tabindex="-1"><a class="header-anchor" href="#ctx-waterfall-session-event-param" aria-hidden="true">#</a> ctx.waterfall(session?, event, ...param)</h3><ul><li><strong>session:</strong> <a href="/v3/api/session.html" class=""><code>Session</code></a> 会话对象</li><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>param:</strong> <code>any[]</code> 事件的参数</li><li>返回值: <code>boolean</code> 匹配结果</li></ul><p>依次触发所有 event 事件的能够匹配 session 对象的回调函数。每次用得到的返回值覆盖下一轮调用的第一个参数，并在所有函数执行完后返回最终结果。chain 为同步，waterfall 为异步。</p><h3 id="ctx-on-event-listener-prepend" tabindex="-1"><a class="header-anchor" href="#ctx-on-event-listener-prepend" aria-hidden="true">#</a> ctx.on(event, listener, prepend?)</h3><ul><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>listener:</strong> <code>Function</code> 回调函数</li><li><strong>prepend:</strong> <code>boolean</code> 是否前置</li><li>返回值: <code>() =&gt; boolean</code> 取消这个监听器</li></ul><p>监听一个事件。</p><h3 id="ctx-once-event-listener-prepend" tabindex="-1"><a class="header-anchor" href="#ctx-once-event-listener-prepend" aria-hidden="true">#</a> ctx.once(event, listener, prepend?)</h3><ul><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>listener:</strong> <code>Function</code> 回调函数</li><li><strong>prepend:</strong> <code>boolean</code> 是否前置</li><li>返回值: <code>() =&gt; boolean</code> 取消这个监听器</li></ul><p>监听一个事件，且确保回调函数只会被执行一次。</p><h3 id="ctx-before-event-listener-append" tabindex="-1"><a class="header-anchor" href="#ctx-before-event-listener-append" aria-hidden="true">#</a> ctx.before(event, listener, append?)</h3><ul><li><strong>event:</strong> <code>string</code> 事件名称</li><li><strong>listener:</strong> <code>Function</code> 回调函数</li><li><strong>append:</strong> <code>boolean</code> 是否后置</li><li>返回值: <code>() =&gt; boolean</code> 取消这个监听器</li></ul><p>监听一个以 <code>before-</code> 开头的事件。</p><h3 id="ctx-middleware-middleware-prepend" tabindex="-1"><a class="header-anchor" href="#ctx-middleware-middleware-prepend" aria-hidden="true">#</a> ctx.middleware(middleware, prepend?)</h3><ul><li><strong>middleware:</strong> <a href="/v3/guide/message.html#%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%97%B4%E4%BB%B6" class=""><code>Middleware</code></a> 要注册的中间件</li><li><strong>prepend:</strong> <code>boolean</code> 是否前置</li><li>返回值: <code>() =&gt; boolean</code> 取消这个中间件</li></ul><p>当前上下文中注册一个中间件。</p><h2 id="指令与插件" tabindex="-1"><a class="header-anchor" href="#指令与插件" aria-hidden="true">#</a> 指令与插件</h2><h3 id="ctx-plugin-plugin-options" tabindex="-1"><a class="header-anchor" href="#ctx-plugin-plugin-options" aria-hidden="true">#</a> ctx.plugin(plugin, options?)</h3><ul><li><strong>plugin:</strong> <code>Plugin</code> 要安装的插件</li><li><strong>options:</strong> <code>any</code> 要传入插件的参数，如果为 <code>false</code> 则插件不会被安装</li><li>返回值: <code>this</code></li></ul><p>当前上下文中安装一个插件。</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">type</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">PluginFunction</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">ctx</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">Context</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">options</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">void</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">type</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">PluginObject</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> { apply</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">PluginFunction</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">T</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt; }</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">type</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">Plugin</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">PluginFunction</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">T</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">PluginObject</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#A6E22E;text-decoration:underline;">T</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;text-decoration:underline;">U</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><h3 id="ctx-with-deps-plugin" tabindex="-1"><a class="header-anchor" href="#ctx-with-deps-plugin" aria-hidden="true">#</a> ctx.with(deps, plugin)</h3><ul><li><strong>deps:</strong> <code>string[]</code> 依赖列表</li><li><strong>plugin:</strong> <code>Plugin</code> 要安装的插件</li><li>返回值: <code>this</code></li></ul><p>安装一个存在依赖的插件，参见 <a href="/v3/guide/context.html#%E5%A3%B0%E6%98%8E%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB" class="">声明依赖关系</a>。请注意：这里的依赖列表都应该是 node 模块名，并且都必须直接以插件的形式导出（如所有官方插件都具备这个特征）。</p><h3 id="ctx-command-def-desc-config" tabindex="-1"><a class="header-anchor" href="#ctx-command-def-desc-config" aria-hidden="true">#</a> ctx.command(def, desc?, config?)</h3><ul><li><strong>def:</strong> <code>string</code> 指令名以及可能的参数</li><li><strong>desc:</strong> <code>string</code> 指令的描述</li><li><strong>config:</strong> <code>CommandConfig</code> 指令的配置 <ul><li><strong>hidden:</strong> <code>boolean</code> 是否在<a href="/v3/guide/command.html#%E9%9A%90%E8%97%8F%E6%8C%87%E4%BB%A4%E5%92%8C%E9%80%89%E9%A1%B9" class="">隐藏指令</a>，默认为 <code>false</code></li><li><strong>checkUnknown:</strong> <code>boolean</code> 是否对未知选项进行检测，默认为 <code>false</code></li><li><strong>checkArgCount:</strong> <code>boolean</code> 是否对参数个数进行检测，默认为 <code>false</code></li><li><strong>authority:</strong> <code>number</code> 最低调用权限，默认为 <code>1</code></li><li><strong>maxUsage:</strong> <code>number</code> 每天最多调用次数，默认为 <code>Infinity</code></li><li><strong>minInterval:</strong> <code>number</code> 每次调用最短时间间隔，默认为 <code>0</code></li><li><strong>showWarning:</strong> <code>boolean</code> 当小于最短间隔时是否进行提醒，默认为 <code>false</code></li><li><strong>usageName:</strong> <code>string</code> 调用标识符，默认为指令名，如果多个指令使用同一个标识符，则它们的调用次数将合并计算</li></ul></li><li>返回值: <a href="/v3/api/command.html" class=""><code>Command</code></a> 注册或修改的指令</li></ul><p>在当前上下文中注册或修改一个指令。关于指令的文档详见 <a href="/v3/api/command.html" class="">指令 API</a>。</p><h3 id="ctx-getselfids-type-assignees" tabindex="-1"><a class="header-anchor" href="#ctx-getselfids-type-assignees" aria-hidden="true">#</a> ctx.getSelfIds(type?, assignees?)</h3><ul><li><strong>type:</strong> <code>Platform</code> 平台名称，如果不写就对应全部平台</li><li><strong>assignees:</strong> <code>string[]</code> 机器人 ID 列表，如果不写就对应当前平台的全部机器人</li><li>返回值: <code>Record&lt;string, readonly string[]&gt;</code> 平台名到机器人 ID 列表的键值对</li></ul><p>按平台名称对机器人分类。</p><h3 id="ctx-broadcast-channels-content-forced" tabindex="-1"><a class="header-anchor" href="#ctx-broadcast-channels-content-forced" aria-hidden="true">#</a> ctx.broadcast(channels?, content, forced?)</h3><ul><li><strong>channels:</strong> <code>string[]</code> 频道列表</li><li><strong>content:</strong> <code>string</code> 要发送的内容</li><li><strong>forced:</strong> <code>boolean</code> 是否无视 silent 标记</li><li>返回值: <code>Promise&lt;string[]&gt;</code> 成功发送的消息 ID 列表</li></ul><p>所有机器人向自己分配的频道广播消息，存在标记 silent 的频道除外。如有失败不会抛出错误。参见 <a href="/v3/guide/message.html#%E5%8F%91%E9%80%81%E5%B9%BF%E6%92%AD%E6%B6%88%E6%81%AF" class="">发送广播消息</a>。</p><h3 id="ctx-logger-scope" tabindex="-1"><a class="header-anchor" href="#ctx-logger-scope" aria-hidden="true">#</a> ctx.logger(scope?)</h3><ul><li><strong>scope:</strong> <code>string</code> 要指定的类型，默认为 <code>&#39;&#39;</code></li><li>返回值: <a href="/v3/guide/logger.html#%E4%BD%BF%E7%94%A8-logger" class=""><code>Logger</code></a></li></ul><p>根据 namespace 生成一个 <a href="/v3/guide/logger.html#%E4%BD%BF%E7%94%A8-logger" class="">Logger 对象</a>。</p><h3 id="ctx-dispose-plugin" tabindex="-1"><a class="header-anchor" href="#ctx-dispose-plugin" aria-hidden="true">#</a> ctx.dispose(plugin?)</h3><ul><li><strong>plugin:</strong> <code>Plugin</code> 要移除的插件</li><li>返回值: <code>void</code></li></ul><p>移除插件中所注册的钩子、中间件、指令和子插件等。<code>plugin</code> 是默认为当前上下文所在的插件。如果既没有提供 <code>plugin</code>，上下文也不是一个插件上下文的话，会抛出一个错误。参见 <a href="/v3/guide/context.html#%E5%8D%B8%E8%BD%BD%E6%8F%92%E4%BB%B6" class="">卸载插件</a>。</p><h2 id="静态属性和方法" tabindex="-1"><a class="header-anchor" href="#静态属性和方法" aria-hidden="true">#</a> 静态属性和方法</h2><h3 id="context-current" tabindex="-1"><a class="header-anchor" href="#context-current" aria-hidden="true">#</a> Context.current</h3><ul><li>类型: <code>symbol</code></li></ul><p>特殊的键值，可以在通用上下文属性对象的方法上访问。参见 <a href="/v3/guide/context.html#%E5%A3%B0%E6%98%8E%E9%80%9A%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E5%B1%9E%E6%80%A7" class="">声明通用上下文属性</a>。</p><h3 id="context-delegate-name" tabindex="-1"><a class="header-anchor" href="#context-delegate-name" aria-hidden="true">#</a> Context.delegate(name) <span class="badge warning" style=""><!--[-->beta<!--]--></span></h3><ul><li><strong>name:</strong> <code>string</code> 属性名称</li></ul><p>声明一个通用上下文属性。参见 <a href="/v3/guide/context.html#%E5%A3%B0%E6%98%8E%E9%80%9A%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E5%B1%9E%E6%80%A7" class="">声明通用上下文属性</a>。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/koishijs/v3/edit/docs/api/context.md" rel="noopener noreferrer" target="_blank" aria-label="帮助我们改善此页面"><!--[--><!--]--> 帮助我们改善此页面 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/5/2021, 12:29:16 PM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: i.dlist@outlook.com">i&#39;DLisT</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shigma10826@gmail.com">Shigma</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/v3/api/app.html" class="nav-link" aria-label="应用 (App)"><!--[--><!--]--> 应用 (App) <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/v3/assets/app.9e111ae1.js" defer></script>
  </body>
</html>
