<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/koishi.png"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#5546a3"><title>指令的触发机制 | Koishi</title><meta name="description" content="">
    <link rel="modulepreload" href="/v3/assets/app.9e111ae1.js"><link rel="modulepreload" href="/v3/assets/execute.html.346d87d6.js"><link rel="modulepreload" href="/v3/assets/execute.html.717e5e78.js">
    <link rel="stylesheet" href="/v3/assets/style.50b5c507.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/v3/" class=""><!----><span class="site-name can-hide">Koishi</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/v3/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/guide/starter.html" class="nav-link" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/api/" class="nav-link" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/plugins/" class="nav-link" aria-label="官方插件"><!--[--><!--]--> 官方插件 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/koishijs/koishi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/v3/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/guide/starter.html" class="nav-link" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/api/" class="nav-link" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/v3/plugins/" class="nav-link" aria-label="官方插件"><!--[--><!--]--> 官方插件 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/koishijs/koishi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">入门</p><ul class=""><li><!--[--><a href="/v3/guide/about.html" class="nav-link sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/starter.html" class="nav-link sidebar-item" aria-label="快速上手"><!--[--><!--]--> 快速上手 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/cli.html" class="nav-link sidebar-item" aria-label="命令行工具"><!--[--><!--]--> 命令行工具 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/docker.html" class="nav-link sidebar-item" aria-label="使用 Docker"><!--[--><!--]--> 使用 Docker <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/faq.html" class="nav-link sidebar-item" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">交互</p><ul class=""><li><!--[--><a href="/v3/guide/message.html" class="nav-link sidebar-item" aria-label="接收和发送消息"><!--[--><!--]--> 接收和发送消息 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/context.html" class="nav-link sidebar-item" aria-label="插件与上下文"><!--[--><!--]--> 插件与上下文 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">指令</p><ul class=""><li><!--[--><a href="/v3/guide/command.html" class="nav-link sidebar-item" aria-label="指令系统初探"><!--[--><!--]--> 指令系统初探 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="指令的触发机制"><!--[--><!--]--> 指令的触发机制 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#指令前缀" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="指令前缀"><!--[--><!--]--> 指令前缀 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#指令别名" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="指令别名"><!--[--><!--]--> 指令别名 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#快捷方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="快捷方式"><!--[--><!--]--> 快捷方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#正则快捷方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="正则快捷方式"><!--[--><!--]--> 正则快捷方式 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#引号参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="引号参数"><!--[--><!--]--> 引号参数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#指令插值" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="指令插值"><!--[--><!--]--> 指令插值 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/v3/guide/execute.html#模糊匹配" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模糊匹配"><!--[--><!--]--> 模糊匹配 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/v3/guide/help.html" class="nav-link sidebar-item" aria-label="查看和编写帮助"><!--[--><!--]--> 查看和编写帮助 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/decorator.html" class="nav-link sidebar-item" aria-label="使用装饰器 (beta)"><!--[--><!--]--> 使用装饰器 (beta) <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">数据库</p><ul class=""><li><!--[--><a href="/v3/guide/database.html" class="nav-link sidebar-item" aria-label="使用数据库"><!--[--><!--]--> 使用数据库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/manage.html" class="nav-link sidebar-item" aria-label="用户系统管理"><!--[--><!--]--> 用户系统管理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/database-support.html" class="nav-link sidebar-item" aria-label="编写数据库支持"><!--[--><!--]--> 编写数据库支持 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">高级</p><ul class=""><li><!--[--><a href="/v3/guide/lifecycle.html" class="nav-link sidebar-item" aria-label="事件与生命周期"><!--[--><!--]--> 事件与生命周期 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/adapter.html" class="nav-link sidebar-item" aria-label="多账户与跨平台"><!--[--><!--]--> 多账户与跨平台 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/logger.html" class="nav-link sidebar-item" aria-label="输出与日志"><!--[--><!--]--> 输出与日志 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/v3/guide/unit-tests.html" class="nav-link sidebar-item" aria-label="单元测试"><!--[--><!--]--> 单元测试 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="指令的触发机制" tabindex="-1"><a class="header-anchor" href="#指令的触发机制" aria-hidden="true">#</a> 指令的触发机制</h1><p>本节介绍有关指令调用的一些机制。</p><h2 id="指令前缀" tabindex="-1"><a class="header-anchor" href="#指令前缀" aria-hidden="true">#</a> 指令前缀</h2><p><strong>指令前缀</strong>是 Koishi 用于判断一条信息是否为指令的机制。这个机制在不同环境下可以是不同的。假设 <code>app.options.nickname</code> 被设置为了“四季酱”，则以下信息都可以触发指令调用：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># 私聊状态下</span></span>
<span class="line"><span style="color:#F8F8F2;">四季酱 </span><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"><span style="color:#F8F8F2;">四季酱, </span><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 群聊状态下</span></span>
<span class="line"><span style="color:#F8F8F2;">四季酱 </span><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"><span style="color:#F8F8F2;">四季酱, </span><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"><span style="color:#F8F8F2;">@四季酱 </span><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"><span style="color:#66D9EF;">echo</span><span style="color:#F8F8F2;"> hello</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><p>你也可以通过修改下列配置项来改变这种行为：</p><ul><li><strong><a href="/v3/api/app.html#options-nickname" class="">nickname</a>:</strong> <code>string | string[]</code> 如果为空的话，上述几条以 <code>Koishi</code> 开头的信息就不会触发指令了。你也可以同时设置多个昵称。</li><li><strong><a href="/v3/api/app.html#options-prefix" class="">prefix</a>:</strong> <code>string | string[]</code> 设置为 <code>.</code> 可以禁止在群中调用 <code>echo</code> 但允许调用 <code>.echo</code>。你也可以同时设置多个前缀。</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><h4 id="nickname-和-prefix-的区别" tabindex="-1"><a class="header-anchor" href="#nickname-和-prefix-的区别" aria-hidden="true">#</a> nickname 和 prefix 的区别</h4><ol><li>nickname 后需要有<strong>逗号或空白字符</strong>，再后面才是指令名；prefix 后面<strong>必须紧跟</strong>指令名。</li><li>nickname 的默认值为 <code>[]</code>，因此覆盖这个值不会对原本可用的调用产生任何影响；prefix 的默认值为 <code>&#39;&#39;</code>，如果覆盖了则会导致非私聊环境下无法直接写指令名进行调用（也就是在非私聊环境下调用指令必须加 nickname 和 prefix 前缀）。</li></ol><p>如果想要保留直接写指令名的调用效果，可以设置 prefix 为 <code>[&#39;.&#39;, &#39;&#39;]</code>，这样一来不写前缀和写 <code>.</code> 做前缀都是可以的。但是也要注意由于是按照从前往后的顺序依次匹配，因此 <code>&#39;&#39;</code> 必须写在最后一个。</p></div><h2 id="指令别名" tabindex="-1"><a class="header-anchor" href="#指令别名" aria-hidden="true">#</a> 指令别名</h2><p>你可以为一条指令添加别名：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">app.</span><span style="color:#A6E22E;">command</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;echo&#39;</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">alias</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;say&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><p>这样一来，无论是 <code>echo</code> 还是 <code>say</code> 都能触发这条指令了。</p><h2 id="快捷方式" tabindex="-1"><a class="header-anchor" href="#快捷方式" aria-hidden="true">#</a> 快捷方式</h2><p>Koishi 的指令机制虽然能够尽可能避免冲突和误触发，但是也带来了一些麻烦。一方面，一些常用指令的调用会受到指令前缀的限制；另一方面，一些指令可能有较长的选项和参数，但它们调用时却往往是相同的。面对这些情况，<strong>快捷方式</strong>能有效地解决你的问题。</p><p>假设你实现了一个货币系统和 rank 指令，调用 <code>rank wealth --global</code> 可以实现查看全服所有人财富排行，你可以这样做：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">ctx.</span><span style="color:#A6E22E;">command</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;rank &lt;type&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  .</span><span style="color:#A6E22E;">shortcut</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;全服财富排行&#39;</span><span style="color:#F8F8F2;">, { args: [</span><span style="color:#E6DB74;">&#39;wealth&#39;</span><span style="color:#F8F8F2;">], options: { global: </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;"> } })</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><p>这样一来，只要输入“全服财富排行”，Koishi 就会自动调用 <code>rank wealth --global</code>，回复查询结果了。</p><p>通常来说，快捷方式都要求严格匹配（当然删除两端空格和繁简体转化这种程度的模糊匹配是可以做的），但是你也可以让快捷方式允许带参数：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">ctx.</span><span style="color:#A6E22E;">command</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;buy &lt;item&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  .</span><span style="color:#A6E22E;">shortcut</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;购买&#39;</span><span style="color:#F8F8F2;">, { prefix: </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">, fuzzy: </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;"> })</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><p>上面程序注册了一个快捷方式，<code>prefix</code> 要求在调用时保留指令前缀，而 <code>fuzzy</code> 允许这个快捷方式带参数列表。这样一来，只要输入“Koishi，购买物品名”，Koishi 就会自动调用“buy 物品名”了。</p><p>不难看出，使用快捷方式会让你的输入方式更加接近自然语言，也会让你的机器人显得更平易近人。</p><h3 id="正则快捷方式" tabindex="-1"><a class="header-anchor" href="#正则快捷方式" aria-hidden="true">#</a> 正则快捷方式</h3><p>你还可以使用正则表达式作为快捷方式：</p><div class="panel-view mini code" style=""><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><!----><!----></div></div><div class="content"><!--[--><!--[--><!--[--><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">ctx.</span><span style="color:#A6E22E;">command</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;market &lt;area&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  .</span><span style="color:#A6E22E;">shortcut</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">/</span><span style="color:#F92672;">^</span><span style="color:#E6DB74;">查(</span><span style="color:#AE81FF;">.</span><span style="color:#F92672;">+</span><span style="color:#E6DB74;">区)市场</span><span style="color:#F92672;">$</span><span style="color:#E6DB74;">/</span><span style="color:#F8F8F2;">, { args: [</span><span style="color:#E6DB74;">&#39;$1&#39;</span><span style="color:#F8F8F2;">] })</span></span>
<span class="line"></span></code></pre><!--]--><!--]--><!--]--></div></div><p>这样一来，输入“查美区市场”就等价于输入“market 美区”了。</p><h2 id="引号参数" tabindex="-1"><a class="header-anchor" href="#引号参数" aria-hidden="true">#</a> 引号参数</h2><p>Koishi 会自动将引号（半角或者全角）中的内容视为一个整体。这在很多场景中都非常有用，下面举出了一些典型的例子：</p><ul><li>当希望传入带空格的参数时（默认行为是只解析空格前面的部分）</li><li>当希望传入以 <code>-</code> 开头的参数时（默认的行为是解析成下一个选项）</li><li>当希望传入一个空字符串作为参数时（默认的行为是解析为 <code>true</code>）</li><li>当希望传入只由数字构成的字符串参数时（默认行为是解析为 <code>number</code> 类型）</li></ul><p>当然，这些情况也都可以使用接下来要介绍的 <a href="#%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F">类型系统</a> 解决。</p><h2 id="指令插值" tabindex="-1"><a class="header-anchor" href="#指令插值" aria-hidden="true">#</a> 指令插值</h2><p>如果你希望在指令中使用其他指令的内容，可以使用 <code>$()</code> 进行指令插值：</p><div class="panel-view"><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><span class="title-text">聊天记录</span><!----></div></div><div class="content"><!--[--><!--[--><div class="chat-message"><div class="avatar" style="background-color:#cc0066;">A</div><div class="nickname">Alice</div><div class="message-box"><!--[--><!--[--><!--[--><p>echo foo$(echo bar) </p><!--]--><!--]--><!--]--></div></div><!--]--><!--[--><div class="chat-message"><img class="avatar" src="/v3/koishi.png"><div class="nickname">Koishi</div><div class="message-box"><!--[--><!--[--><!--[--><p>foobar </p><!--]--><!--]--><!--]--></div></div><!--]--><!--]--></div></div><p>Koishi 默认不转义单引号内的文本。如果你不希望某个参数被插值语法所转义，可以使用单引号：</p><div class="panel-view"><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><span class="title-text">聊天记录</span><!----></div></div><div class="content"><!--[--><!--[--><div class="chat-message"><div class="avatar" style="background-color:#cc0066;">A</div><div class="nickname">Alice</div><div class="message-box"><!--[--><!--[--><!--[--><p>echo &#39;foo$(echo bar)&#39; </p><!--]--><!--]--><!--]--></div></div><!--]--><!--[--><div class="chat-message"><img class="avatar" src="/v3/koishi.png"><div class="nickname">Koishi</div><div class="message-box"><!--[--><!--[--><!--[--><p>foo$(echo bar) </p><!--]--><!--]--><!--]--></div></div><!--]--><!--]--></div></div><p>最后，你还可以在 <a href="/v3/plugins/eval/" class="">koishi-plugin-eval</a> 中了解到另一种插值方法。</p><h2 id="模糊匹配" tabindex="-1"><a class="header-anchor" href="#模糊匹配" aria-hidden="true">#</a> 模糊匹配</h2><p>在日常的使用中，我们也难免会遇到打错的情况，这时 Koishi 还会自动根据相近的指令名进行纠错提醒：</p><div class="panel-view"><div class="controls"><div class="circle red"></div><div class="circle yellow"></div><div class="circle green"></div><div class="title"><span class="title-text">聊天记录</span><!----></div></div><div class="content"><!--[--><!--[--><div class="chat-message"><div class="avatar" style="background-color:#cc0066;">A</div><div class="nickname">Alice</div><div class="message-box"><!--[--><!--[--><!--[--><p>ecko hello </p><!--]--><!--]--><!--]--></div></div><!--]--><!--[--><div class="chat-message"><img class="avatar" src="/v3/koishi.png"><div class="nickname">Koishi</div><div class="message-box"><!--[--><!--[--><!--[--><p>没有此命令。你要找的是不是“echo”？发送空行或句号以调用推测的指令。 </p><!--]--><!--]--><!--]--></div></div><!--]--><!--[--><div class="chat-message"><div class="avatar" style="background-color:#cc0066;">A</div><div class="nickname">Alice</div><div class="message-box"><!--[--><!--[--><!--[--><p>. </p><!--]--><!--]--><!--]--></div></div><!--]--><!--[--><div class="chat-message"><img class="avatar" src="/v3/koishi.png"><div class="nickname">Koishi</div><div class="message-box"><!--[--><!--[--><!--[--><p>hello </p><!--]--><!--]--><!--]--></div></div><!--]--><!--]--></div></div><p>如果想调整模糊匹配的程度，你还可以修改配置项 <a href="/v3/api/app.html#options-minsimilarity" class="">minSimilarity</a>。是不是很方便呢？</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/koishijs/v3/edit/docs/guide/execute.md" rel="noopener noreferrer" target="_blank" aria-label="帮助我们改善此页面"><!--[--><!--]--> 帮助我们改善此页面 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/5/2021, 3:36:52 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: i.dlist@outlook.com">i&#39;DLisT</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shigma10826@gmail.com">Shigma</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/v3/guide/command.html" class="nav-link" aria-label="指令系统初探"><!--[--><!--]--> 指令系统初探 <!--[--><!--]--></a></span><span class="next"><a href="/v3/guide/help.html" class="nav-link" aria-label="查看和编写帮助"><!--[--><!--]--> 查看和编写帮助 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/v3/assets/app.9e111ae1.js" defer></script>
  </body>
</html>
